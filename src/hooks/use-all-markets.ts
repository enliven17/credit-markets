"use client"`n`n`nimport { useState, useEffect, useCallback } from 'react';`nimport { getAllMarkets, Market } from '@/lib/flow/market';`n`nexport const useAllMarkets = () => {`n  const [markets, setMarkets] = useState<Market[]>([]);`n  const [isLoading, setIsLoading] = useState<boolean>(false);`n  const [error, setError] = useState<string | null>(null);`n`n  const fetchMarkets = useCallback(async () => {`n    setIsLoading(true);`n    setError(null);`n`n    try {`n      const allMarkets = await getAllMarkets();`n      setMarkets(allMarkets);`n    } catch (err) {`n      setError(err instanceof Error ? err.message : "Failed to fetch markets");`n      setMarkets([]);`n    } finally {`n      setIsLoading(false);`n    }`n  }, []);`n`n  useEffect(() => {`n    fetchMarkets();`n  }, [fetchMarkets]);`n`n  return {`n    markets,`n    isLoading,`n    error,`n    refetch: fetchMarkets`n  };`n};