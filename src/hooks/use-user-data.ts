import { useState, useEffect } from "react";`nimport {`n  getUserByAddress,`n  User,`n  generateFallbackName,`n} from "@/utils/supabase/user";`n`nexport function useUserData(address: string | null) {`n  const [user, setUser] = useState<User | null>(null);`n  const [loading, setLoading] = useState(false);`n  const [error, setError] = useState<string | null>(null);`n`n  useEffect(() => {`n    if (!address) {`n      setUser(null);`n      setLoading(false);`n      return;`n    }`n`n    setLoading(true);`n    setError(null);`n`n    getUserByAddress(address)`n      .then((userData) => {`n        setUser(userData);`n      })`n      .catch((err) => {`n        setError(err.message || "Failed to fetch user data");`n        console.error("Error fetching user data:", err);`n      })`n      .finally(() => {`n        setLoading(false);`n      });`n  }, [address]);`n`n  const displayName =`n    user?.display_name ||`n    user?.username ||`n    (address ? generateFallbackName(address) : "Unknown");`n`n  const shortName =`n    user?.username || (address ? generateFallbackName(address) : "Unknown");`n`n  return {`n    user,`n    loading,`n    error,`n    displayName,`n    shortName,`n    hasProfile: !!user,`n  };`n}