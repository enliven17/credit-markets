/* eslint-disable @typescript-eslint/no-explicit-any */`nimport { useState, useEffect, useCallback } from "react";`nimport { PointsManager, ActivityType, ActivityDetails } from "@/lib/points-system";`nimport { useAuth } from "@/providers/auth-provider";`n`nexport interface UserPointsData {`n  points: number;`n  rank: number;`n  isLoading: boolean;`n}`n`nexport interface LeaderboardEntry {`n  rank: number;`n  address: string;`n  points: number;`n  totalStaked: number;`n  totalWinnings: number;`n  marketsParticipated: number;`n  winStreak: number;`n  roi: number;`n  username: string;`n  displayName: string;`n  profileImage: string | null;`n}`n`nexport const usePoints = () => {`n  const { user, isAuthenticated } = useAuth();`n  const [userPoints, setUserPoints] = useState<UserPointsData>({`n    points: 0,`n    rank: 0,`n    isLoading: true`n  });`n  const [leaderboard, setLeaderboard] = useState<LeaderboardEntry[]>([]);`n  const [activities, setActivities] = useState<any[]>([]);`n  const [isLoadingLeaderboard, setIsLoadingLeaderboard] = useState(false);`n  const [isLoadingActivities, setIsLoadingActivities] = useState(false);`n`n  // Fetch user's points and rank`n  const fetchUserPoints = useCallback(async () => {`n    if (!user?.addr || !isAuthenticated) {`n      setUserPoints({ points: 0, rank: 0, isLoading: false });`n      return;`n    }`n`n    try {`n      const { points, rank } = await PointsManager.getUserPointsAndRank(user.addr);`n      setUserPoints({ points, rank, isLoading: false });`n    } catch (error) {`n      console.error("Error fetching user points:", error);`n      setUserPoints({ points: 0, rank: 0, isLoading: false });`n    }`n  }, [user?.addr, isAuthenticated]);`n`n  // Fetch leaderboard`n  const fetchLeaderboard = useCallback(async (limit: number = 50) => {`n    setIsLoadingLeaderboard(true);`n    try {`n      const data = await PointsManager.getLeaderboard(limit);`n      setLeaderboard(data);`n    } catch (error) {`n      console.error("Error fetching leaderboard:", error);`n    } finally {`n      setIsLoadingLeaderboard(false);`n    }`n  }, []);`n`n  // Fetch user activities`n  const fetchActivities = useCallback(async (limit: number = 20) => {`n    if (!user?.addr || !isAuthenticated) {`n      setActivities([]);`n      return;`n    }`n`n    setIsLoadingActivities(true);`n    try {`n      const data = await PointsManager.getUserActivities(user.addr, limit);`n      setActivities(data);`n    } catch (error) {`n      console.error("Error fetching activities:", error);`n    } finally {`n      setIsLoadingActivities(false);`n    }`n  }, [user?.addr, isAuthenticated]);`n`n  // Award points for an activity`n  const awardPoints = useCallback(async (`n    activityType: ActivityType,`n    details?: ActivityDetails,`n    marketId?: number`n  ) => {`n    if (!user?.addr || !isAuthenticated) return false;`n`n    const success = await PointsManager.awardPoints(user.addr, activityType, details!, marketId);`n    `n    if (success) {`n      // Refresh user points and activities`n      await fetchUserPoints();`n      await fetchActivities();`n    }`n`n    return success;`n  }, [user?.addr, isAuthenticated, fetchUserPoints, fetchActivities]);`n`n  // Initial data fetch`n  useEffect(() => {`n    fetchUserPoints();`n    fetchActivities();`n  }, [fetchUserPoints, fetchActivities]);`n`n  return {`n    // User data`n    userPoints,`n    `n    // Leaderboard data`n    leaderboard,`n    isLoadingLeaderboard,`n    fetchLeaderboard,`n    `n    // Activities data`n    activities,`n    isLoadingActivities,`n    fetchActivities,`n    `n    // Actions`n    awardPoints,`n    refreshUserPoints: fetchUserPoints,`n  };`n};